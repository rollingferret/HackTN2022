<!DOCTYPE html>
<html>

<head>
  <title>Add Map</title>

  <style type="text/css">
    /* Set the size of the div element that contains the map */
    #map {
      height: 400px;
      /* The height is 400 pixels */
      width: 100%;
      /* The width is the width of the web page */
    }
  </style>
  <script>
    // Initialize and add the map
    async function initMap() {
      const res = await fetch('./formatted_daycares.json')
      const dayCares = await res.json()
      const dayCaresArray = Object.values(dayCares)
  
      // The location of Uluru
      const shelby = { lat: 35.1269, lng: 89.9253 };
      // The map, centered at Uluru
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 4,
        center: shelby,
      });
      let dayCareMarkers = dayCaresArray.map((dayCare) => {
        const position = { lat: dayCare.coordinates.latitude, lng: dayCare.coordinates.longitude }

        return new google.maps.Marker({
          position,
          map
        })
      })
      // The marker, positioned at Uluru
      const marker = new google.maps.Marker({
        position: shelby,
        map: map,
      });
    }
  </script>
</head>

<body>
  <div id="react">
  </div>
  <h3>My Google Maps Demo</h3>
  <!--The div element for the map -->
  <div id="map"></div>

  <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=%REACT_APP_GOOGLEMAPS%&callback=initMap&libraries=&v=weekly"
    async></script>
</body>

</html>
